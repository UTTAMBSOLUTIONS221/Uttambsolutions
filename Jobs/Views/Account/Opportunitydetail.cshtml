@model DBL.Entities.SystemJob
@{
    // Method to calculate relative time
    string GetRelativeDate(DateTime date)
    {
        var now = DateTime.Now;
        var timeSpan = now - date;

        if (timeSpan.TotalDays < 1)
        {
            return "Today";
        }
        else if (timeSpan.TotalDays < 2)
        {
            return "Yesterday";
        }
        else
        {
            var days = (int)timeSpan.TotalDays;
            return $"{days} day{(days > 1 ? "s" : "")} ago";
        }
    }
}
<div class="modal-header">
    <h5 class="modal-title" id="Uttambsolutionsmodallabel">Job Details</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <!-- Section 1: Job Details -->
    <div id="section1" class="section">
        <h6 class="mb-4">Step 1: Job Details</h6>
        <div class="mb-3">
            <h4 class="font-weight-bold text-primary">@Model.Title</h4>
            <p class="text-muted"><strong>Employer:</strong> @Model.Employername</p>
            <div class="d-flex flex-wrap mb-2">
                <span class="badge badge-primary mr-2 mb-2"><strong>Location:</strong> @Model.Locationname</span>
                <span class="badge badge-primary mr-2 mb-2"><strong>Type:</strong> @Model.Jobtypename</span>
                <span class="badge badge-primary mr-2 mb-2"><strong>Salary Range:</strong> @Model.JobSalaryRange</span>
                <span class="badge badge-primary mb-2"><strong>Function:</strong> @Model.Functionname</span>
            </div>
            <hr />
            <div class="d-flex justify-content-between mb-3">
                <span class="badge badge-success">@Model.JobStatus</span>
                <span class="text-muted">@GetRelativeDate(Model.DateCreated)</span>
            </div>
            <p>@Model.JobDescription</p>
        </div>
        <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-primary" onclick="nextSection()">Next</button>
        </div>
    </div>

    <!-- Section 2: Key Responsibilities -->
    <div id="section2" class="section" style="display: none;">
        <h6 class="mb-4">Step 2: Key Responsibilities</h6>
        @if (Model.Systemjobfunction != null)
        {
            <ul class="list-group">
                @foreach (var jobFunction in Model.Systemjobfunction)
                {
                    <li class="list-group-item">@jobFunction.Jobfunction</li>
                }
            </ul>
        }
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevSection()">Previous</button>
            <button type="button" class="btn btn-primary" onclick="nextSection()">Next</button>
        </div>
    </div>

    <!-- Section 3: Qualifications -->
    <div id="section3" class="section" style="display: none;">
        <h6 class="mb-4">Step 3: Qualifications</h6>
        @if (Model.Systemjobqualification != null)
        {
            <ul class="list-group">
                @foreach (var jobQualification in Model.Systemjobqualification)
                {
                    <li class="list-group-item">@jobQualification.Jobqualification</li>
                }
            </ul>
        }
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevSection()">Previous</button>
            <button type="button" class="btn btn-primary" onclick="nextSection()">Next</button>
        </div>
    </div>

    <!-- Section 4: Skills -->
    <div id="section4" class="section" style="display: none;">
        <h6 class="mb-4">Step 4: Preferred Skills</h6>
        @if (Model.Systemjobskill != null)
        {
            <ul class="list-group">
                @foreach (var jobSkill in Model.Systemjobskill)
                {
                    <li class="list-group-item">@jobSkill.Jobskill</li>
                }
            </ul>
        }
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevSection()">Previous</button>
            <button type="button" class="btn btn-primary" onclick="nextSection()">Next</button>
        </div>
    </div>

    <!-- Section 5: Benefits -->
    <div id="section5" class="section" style="display: none;">
        <h6 class="mb-4">Step 5: Benefits</h6>
        @if (Model.Systemjobbenefit != null)
        {
            <ul class="list-group">
                @foreach (var jobBenefit in Model.Systemjobbenefit)
                {
                    <li class="list-group-item">@jobBenefit.Jobbenefit</li>
                }
            </ul>
        }
        <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-secondary" onclick="prevSection()">Previous</button>
            <button type="button" class="btn btn-primary" onclick="nextSection()">Next</button>
        </div>
    </div>

    <!-- Section 6: Conclusion -->
    <div id="section6" class="section" style="display: none;">
        <h6 class="mb-4">Step 6: Job Conclusion</h6>
        <p><strong>Reports to:</strong> @Model.Jobreportto</p>
        <p><strong>Support Document:</strong> <span id="SupportDocumentDisplay">@Model.SupportDocumentName</span></p>
        <p><strong>How to Apply:</strong> @Model.Jobhowtoapply</p>
        <div class="row">
            <div class="col-sm-12" hidden>
                <p><strong>Images URL:</strong> <span id="ImagesUrlDisplay">@Model.ImagesUrl</span></p>
            </div>
            <div id="ImagesPreviewContainer"></div>
        </div>
        <div class="d-flex justify-content-between align-items-center">
            <button type="button" class="btn btn-secondary" onclick="prevSection()">Previous</button>
        </div>
    </div>
</div>

